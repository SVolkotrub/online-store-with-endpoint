{"ast":null,"code":"import _regeneratorRuntime from\"H:/Svetik/qa-testing/online-store-with-endpoint/online-store/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"H:/Svetik/qa-testing/online-store-with-endpoint/online-store/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"H:/Svetik/qa-testing/online-store-with-endpoint/online-store/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"H:/Svetik/qa-testing/online-store-with-endpoint/online-store/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"H:/Svetik/qa-testing/online-store-with-endpoint/online-store/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"H:/Svetik/qa-testing/online-store-with-endpoint/online-store/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{PureComponent}from\"react\";import getProductsByCategory from\"../other-components-and-functions/getProductsByCategory\";import ProductCard from\"../components/productCard/ProductCard\";import{connect}from'react-redux';import\"./ProductList.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductList=/*#__PURE__*/function(_PureComponent){_inherits(ProductList,_PureComponent);var _super=_createSuper(ProductList);function ProductList(props){var _this;_classCallCheck(this,ProductList);_this=_super.call(this,props);_this.state={products:[],loading:false,error:null,category:_this.props.category};return _this;}_createClass(ProductList,[{key:\"fetchData\",value:function(){var _fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(props){var productsRequest;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getProductsByCategory(props);case 2:productsRequest=_context.sent;return _context.abrupt(\"return\",this.setState({products:productsRequest,loading:false}));case 4:case\"end\":return _context.stop();}}},_callee,this);}));function fetchData(_x){return _fetchData.apply(this,arguments);}return fetchData;}()},{key:\"componentDidMount\",value:function componentDidMount(){this.setState({loading:true});this.fetchData(this.state.category);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(props,state){if(this.state.category!==this.props.category){this.setState({category:this.props.category});this.fetchData(this.props.category);}}},{key:\"render\",value:function render(){var _this$state=this.state,products=_this$state.products,loading=_this$state.loading,error=_this$state.error;if(error){return/*#__PURE__*/_jsx(\"p\",{children:\"Something went wrong\"});}if(loading){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading ...\"});}if(products!==null){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-list-header\",children:this.props.category}),/*#__PURE__*/_jsx(\"div\",{className:\"product-list-container\",children:products.map(function(product){return/*#__PURE__*/_jsx(ProductCard,{product:product},product.id);})})]});}else{return\"Loading...\";}}}]);return ProductList;}(PureComponent);;function mapStateToProps(state){return{category:state.category.category};};export default connect(mapStateToProps)(ProductList);","map":{"version":3,"names":["PureComponent","getProductsByCategory","ProductCard","connect","ProductList","props","state","products","loading","error","category","productsRequest","setState","fetchData","map","product","id","mapStateToProps"],"sources":["H:/Svetik/qa-testing/online-store-with-endpoint/online-store/src/pages/ProductList.js"],"sourcesContent":["\r\nimport { PureComponent} from \"react\";\r\nimport getProductsByCategory from \"../other-components-and-functions/getProductsByCategory\";\r\nimport ProductCard from \"../components/productCard/ProductCard\";\r\nimport { connect } from 'react-redux';\r\nimport \"./ProductList.css\";\r\n\r\nclass ProductList extends PureComponent { \r\n    constructor(props) {\r\n        super(props);\r\n        \r\n      this.state = {\r\n        products: [],\r\n        loading: false,\r\n        error: null,\r\n        category: this.props.category,\r\n      };    \r\n      \r\n  }\r\n  async fetchData(props) {\r\n    let productsRequest = await getProductsByCategory(props);\r\n    return  this.setState({ products: productsRequest, loading: false });\r\n}\r\n  componentDidMount() {\r\n    this.setState({ loading: true });\r\n    this.fetchData(this.state.category);\r\n  }         \r\n  componentDidUpdate(props, state) {\r\n     if (this.state.category !== this.props.category) {\r\n       this.setState({ category: this.props.category });\r\n       this.fetchData(this.props.category);\r\n    }\r\n  }\r\n\r\nrender() {\r\n  const { products, loading, error } = this.state;\r\n  \r\n    if (error) {\r\n      return <p>Something went wrong</p>;\r\n    }\r\n\r\n    if (loading) {\r\n      return <p>Loading ...</p>;\r\n    }\r\n    if(products !== null )\r\n    {\r\n      return (\r\n      <>\r\n          <div className=\"product-list-header\">{this.props.category }</div>\r\n      <div className=\"product-list-container\">\r\n            {products.map(product =>\r\n              <ProductCard product={product} key={product.id} />\r\n        )}\r\n          </div>\r\n          </>\r\n    );\r\n    } else {      \r\n      return \"Loading...\";\r\n    }\r\n  }\r\n  \r\n};\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    category: state.category.category\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps)(ProductList);\r\n\r\n"],"mappings":"42BACA,OAASA,aAAT,KAA6B,OAA7B,CACA,MAAOC,sBAAP,KAAkC,yDAAlC,CACA,MAAOC,YAAP,KAAwB,uCAAxB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAO,mBAAP,C,gJAEMC,Y,kHACF,qBAAYC,KAAZ,CAAmB,6CACf,uBAAMA,KAAN,EAEF,MAAKC,KAAL,CAAa,CACXC,QAAQ,CAAE,EADC,CAEXC,OAAO,CAAE,KAFE,CAGXC,KAAK,CAAE,IAHI,CAIXC,QAAQ,CAAE,MAAKL,KAAL,CAAWK,QAJV,CAAb,CAHiB,aAUpB,C,qIACD,iBAAgBL,KAAhB,8JAC8BJ,sBAAqB,CAACI,KAAD,CADnD,QACMM,eADN,+CAEU,KAAKC,QAAL,CAAc,CAAEL,QAAQ,CAAEI,eAAZ,CAA6BH,OAAO,CAAE,KAAtC,CAAd,CAFV,6D,wHAIA,4BAAoB,CAClB,KAAKI,QAAL,CAAc,CAAEJ,OAAO,CAAE,IAAX,CAAd,EACA,KAAKK,SAAL,CAAe,KAAKP,KAAL,CAAWI,QAA1B,EACD,C,kCACD,4BAAmBL,KAAnB,CAA0BC,KAA1B,CAAiC,CAC9B,GAAI,KAAKA,KAAL,CAAWI,QAAX,GAAwB,KAAKL,KAAL,CAAWK,QAAvC,CAAiD,CAC/C,KAAKE,QAAL,CAAc,CAAEF,QAAQ,CAAE,KAAKL,KAAL,CAAWK,QAAvB,CAAd,EACA,KAAKG,SAAL,CAAe,KAAKR,KAAL,CAAWK,QAA1B,EACF,CACF,C,sBAEH,iBAAS,CACP,gBAAqC,KAAKJ,KAA1C,CAAQC,QAAR,aAAQA,QAAR,CAAkBC,OAAlB,aAAkBA,OAAlB,CAA2BC,KAA3B,aAA2BA,KAA3B,CAEE,GAAIA,KAAJ,CAAW,CACT,mBAAO,2CAAP,CACD,CAED,GAAID,OAAJ,CAAa,CACX,mBAAO,kCAAP,CACD,CACD,GAAGD,QAAQ,GAAK,IAAhB,CACA,CACE,mBACA,wCACI,YAAK,SAAS,CAAC,qBAAf,UAAsC,KAAKF,KAAL,CAAWK,QAAjD,EADJ,cAEA,YAAK,SAAS,CAAC,wBAAf,UACOH,QAAQ,CAACO,GAAT,CAAa,SAAAC,OAAO,qBACnB,KAAC,WAAD,EAAa,OAAO,CAAEA,OAAtB,EAAoCA,OAAO,CAACC,EAA5C,CADmB,EAApB,CADP,EAFA,GADA,CAUD,CAZD,IAYO,CACL,MAAO,YAAP,CACD,CACF,C,yBApDuBhB,a,EAsDzB,CACD,QAASiB,gBAAT,CAAyBX,KAAzB,CAAgC,CAC9B,MAAO,CACLI,QAAQ,CAAEJ,KAAK,CAACI,QAAN,CAAeA,QADpB,CAAP,CAGD,EAED,cAAeP,QAAO,CAACc,eAAD,CAAP,CAAyBb,WAAzB,CAAf"},"metadata":{},"sourceType":"module"}