{"ast":null,"code":"var _jsxFileName = \"H:\\\\Svetik\\\\qa-testing\\\\Scandiweb\\\\volkotrub-shop-project\\\\src\\\\pages\\\\ProductList.js\";\nimport { PureComponent } from \"react\";\nimport getProductsByCategory from \"../other-components-and-functions/getProductsByCategory\";\nimport ProductCard from \"../components/productCard/ProductCard\";\nimport { connect } from 'react-redux';\nimport \"./ProductList.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass ProductList extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: [],\n      loading: false,\n      error: null,\n      category: this.props.category.category\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.category.category !== state.category) {\n      setState({\n        products: null,\n        category: props.category.category\n      });\n    }\n\n    return null;\n  }\n\n  async fetchData(props) {\n    let productsRequest = await getProductsByCategory(props);\n    return this.setState({\n      products: productsRequest,\n      loading: false\n    });\n  }\n\n  componentDidMount() {\n    this.setState({\n      loading: true\n    });\n    this.fetchData(this.state.category);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.state.category !== this.props.category.category) {\n      this.setState({\n        category: this.props.category.category\n      });\n      this.fetchData(this.state.category);\n    }\n  }\n\n  render() {\n    const {\n      products,\n      loading,\n      error\n    } = this.state;\n    console.log(products, this.props.category.category);\n\n    if (error) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Something went wrong\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (loading) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading ...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (products !== null) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-list-header\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-list-container\",\n          children: products.map(product => /*#__PURE__*/_jsxDEV(ProductCard, {\n            product: product\n          }, product.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true);\n    } else {\n      return \"Loading...\";\n    }\n  }\n\n}\n\n;\n\nfunction mapStateToProps(state) {\n  return {\n    category: state.category\n  };\n}\n\n;\nexport default connect(mapStateToProps)(ProductList);","map":{"version":3,"names":["PureComponent","getProductsByCategory","ProductCard","connect","ProductList","constructor","props","state","products","loading","error","category","getDerivedStateFromProps","setState","fetchData","productsRequest","componentDidMount","componentDidUpdate","prevProps","prevState","render","console","log","map","product","id","mapStateToProps"],"sources":["H:/Svetik/qa-testing/Scandiweb/volkotrub-shop-project/src/pages/ProductList.js"],"sourcesContent":["\r\nimport { PureComponent} from \"react\";\r\nimport getProductsByCategory from \"../other-components-and-functions/getProductsByCategory\";\r\nimport ProductCard from \"../components/productCard/ProductCard\";\r\nimport { connect } from 'react-redux';\r\n\r\nimport \"./ProductList.css\";\r\n\r\n\r\n\r\nclass ProductList extends PureComponent {\r\n   \r\n    constructor(props) {\r\n        super(props);\r\n        \r\n      this.state = {\r\n        products: [],\r\n        loading: false,\r\n        error: null,\r\n        category: this.props.category.category,\r\n      };    \r\n      \r\n  }\r\n  \r\n    static getDerivedStateFromProps(props, state) {\r\n    if (props.category.category !== state.category) {\r\n     setState({ products: null, category: props.category.category });\r\n    }\r\n    return null;\r\n  }\r\n   \r\n  async fetchData(props) {\r\n    let productsRequest = await getProductsByCategory(props);\r\n    return  this.setState({ products: productsRequest, loading: false });\r\n}\r\n  componentDidMount() {\r\n    this.setState({ loading: true });\r\n    this.fetchData(this.state.category);\r\n  }\r\n          \r\n   componentDidUpdate(prevProps, prevState) {\r\n     if (this.state.category !== this.props.category.category) {\r\n       this.setState({ category: this.props.category.category });\r\n      this.fetchData(this.state.category);\r\n    }\r\n  }\r\n  \r\nrender() {\r\n  const { products, loading, error } = this.state;\r\n  console.log(products, this.props.category.category)\r\n    if (error) {\r\n      return <p>Something went wrong</p>;\r\n    }\r\n\r\n    if (loading) {\r\n      return <p>Loading ...</p>;\r\n    }\r\n    if(products !== null )\r\n    {\r\n      return (\r\n      <>\r\n          <div className=\"product-list-header\"></div>\r\n      <div className=\"product-list-container\">\r\n            {products.map(product =>\r\n              <ProductCard product={product} key={product.id} />\r\n        )}\r\n          </div>\r\n          </>\r\n    );\r\n    } else {      \r\n      return \"Loading...\";\r\n    }\r\n  }\r\n  \r\n};\r\nfunction mapStateToProps(state) {\r\n  return {category: state.category}\r\n};\r\n\r\nexport default connect(mapStateToProps)(ProductList);\r\n\r\n"],"mappings":";AACA,SAASA,aAAT,QAA6B,OAA7B;AACA,OAAOC,qBAAP,MAAkC,yDAAlC;AACA,OAAOC,WAAP,MAAwB,uCAAxB;AACA,SAASC,OAAT,QAAwB,aAAxB;AAEA,OAAO,mBAAP;;;;AAIA,MAAMC,WAAN,SAA0BJ,aAA1B,CAAwC;EAEpCK,WAAW,CAACC,KAAD,EAAQ;IACf,MAAMA,KAAN;IAEF,KAAKC,KAAL,GAAa;MACXC,QAAQ,EAAE,EADC;MAEXC,OAAO,EAAE,KAFE;MAGXC,KAAK,EAAE,IAHI;MAIXC,QAAQ,EAAE,KAAKL,KAAL,CAAWK,QAAX,CAAoBA;IAJnB,CAAb;EAOH;;EAEgC,OAAxBC,wBAAwB,CAACN,KAAD,EAAQC,KAAR,EAAe;IAC9C,IAAID,KAAK,CAACK,QAAN,CAAeA,QAAf,KAA4BJ,KAAK,CAACI,QAAtC,EAAgD;MAC/CE,QAAQ,CAAC;QAAEL,QAAQ,EAAE,IAAZ;QAAkBG,QAAQ,EAAEL,KAAK,CAACK,QAAN,CAAeA;MAA3C,CAAD,CAAR;IACA;;IACD,OAAO,IAAP;EACD;;EAEc,MAATG,SAAS,CAACR,KAAD,EAAQ;IACrB,IAAIS,eAAe,GAAG,MAAMd,qBAAqB,CAACK,KAAD,CAAjD;IACA,OAAQ,KAAKO,QAAL,CAAc;MAAEL,QAAQ,EAAEO,eAAZ;MAA6BN,OAAO,EAAE;IAAtC,CAAd,CAAR;EACH;;EACCO,iBAAiB,GAAG;IAClB,KAAKH,QAAL,CAAc;MAAEJ,OAAO,EAAE;IAAX,CAAd;IACA,KAAKK,SAAL,CAAe,KAAKP,KAAL,CAAWI,QAA1B;EACD;;EAEAM,kBAAkB,CAACC,SAAD,EAAYC,SAAZ,EAAuB;IACvC,IAAI,KAAKZ,KAAL,CAAWI,QAAX,KAAwB,KAAKL,KAAL,CAAWK,QAAX,CAAoBA,QAAhD,EAA0D;MACxD,KAAKE,QAAL,CAAc;QAAEF,QAAQ,EAAE,KAAKL,KAAL,CAAWK,QAAX,CAAoBA;MAAhC,CAAd;MACD,KAAKG,SAAL,CAAe,KAAKP,KAAL,CAAWI,QAA1B;IACD;EACF;;EAEHS,MAAM,GAAG;IACP,MAAM;MAAEZ,QAAF;MAAYC,OAAZ;MAAqBC;IAArB,IAA+B,KAAKH,KAA1C;IACAc,OAAO,CAACC,GAAR,CAAYd,QAAZ,EAAsB,KAAKF,KAAL,CAAWK,QAAX,CAAoBA,QAA1C;;IACE,IAAID,KAAJ,EAAW;MACT,oBAAO;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAP;IACD;;IAED,IAAID,OAAJ,EAAa;MACX,oBAAO;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAP;IACD;;IACD,IAAGD,QAAQ,KAAK,IAAhB,EACA;MACE,oBACA;QAAA,wBACI;UAAK,SAAS,EAAC;QAAf;UAAA;UAAA;UAAA;QAAA,QADJ,eAEA;UAAK,SAAS,EAAC,wBAAf;UAAA,UACOA,QAAQ,CAACe,GAAT,CAAaC,OAAO,iBACnB,QAAC,WAAD;YAAa,OAAO,EAAEA;UAAtB,GAAoCA,OAAO,CAACC,EAA5C;YAAA;YAAA;YAAA;UAAA,QADD;QADP;UAAA;UAAA;UAAA;QAAA,QAFA;MAAA,gBADA;IAUD,CAZD,MAYO;MACL,OAAO,YAAP;IACD;EACF;;AA9DqC;;AAgEvC;;AACD,SAASC,eAAT,CAAyBnB,KAAzB,EAAgC;EAC9B,OAAO;IAACI,QAAQ,EAAEJ,KAAK,CAACI;EAAjB,CAAP;AACD;;AAAA;AAED,eAAeR,OAAO,CAACuB,eAAD,CAAP,CAAyBtB,WAAzB,CAAf"},"metadata":{},"sourceType":"module"}