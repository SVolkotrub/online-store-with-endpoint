{"ast":null,"code":"import _objectSpread from\"H:/Svetik/qa-testing/online-store-with-endpoint/online-store/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"H:/Svetik/qa-testing/online-store-with-endpoint/online-store/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"H:/Svetik/qa-testing/online-store-with-endpoint/online-store/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"H:/Svetik/qa-testing/online-store-with-endpoint/online-store/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"H:/Svetik/qa-testing/online-store-with-endpoint/online-store/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"H:/Svetik/qa-testing/online-store-with-endpoint/online-store/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _taggedTemplateLiteral from\"H:/Svetik/qa-testing/online-store-with-endpoint/online-store/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7;import{PureComponent}from\"react\";import styled from\"styled-components\";import icon from\"./button-icon-empty-cart.png\";import{Link}from\"react-router-dom\";import{connect}from'react-redux';import{addProductToCart,changeProductQuantity}from\"../../store/cart\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductCardStyle=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  order: 0;\\n  flex-grow: 0;\\n  background: #FFFFFF;\\n  padding: 16px;\\n  width: 386px;\\n  position: relative;\\n  &:hover {\\n  box-shadow: 0px 4px 35px rgba(168, 172, 176, 0.19);\\n  }\\n\"])));var Text=styled.p(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  left: 25.42%;\\n  right: 25.71%;\\n  top: 150px;\\n  display: block;\\n  font-weight: 400;\\n  font-size: 24px;\\n  line-height: 160%;\\n  color: #8D8F9A;\\n\"])));var Button=styled.button(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display:  none;\\n  background: #5ECE7B;\\n  width: 52px;\\n  height: 52px;\\n  border: none;\\n  border-radius: 50%;\\n  justify-content: center;\\n  \",\" ;\\n\\n\",\":hover & {\\n  display: block;\\n  position: absolute;\\n  top: 320px;\\n  left: 300px;\\n  cursor: pointer;  \\n}\\n\"])),function(props){return props.inStock?\" opacity: 1 \":\"display: none !important; opacity: 0\";},ProductCardStyle);var ImageContainer=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  width: 354px;\\n  height: 330px;\\n\\n\"])));var Image=styled.img(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  max-height: 100%;\\n  width: auto;\\n  position: relative;\\n  \",\"\\n\"])),function(props){return props.inStock?\"opacity: 1\":\"opacity: 0.5\";});var Title=styled.p(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  font-weight: 300;\\n  font-size: 18px;\\n  line-height: 160%;\\n  text-align: left;\\n  color: \",\" ;\\n  margin: 24px 0 0 0;\\n\"])),function(props){return props.inStock?\"#1D1F22\":\"#8D8F9A\";});var Price=styled.p(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  margin: 0;\\n  font-weight: 500;\\n  font-size: 18px;\\n  line-height: 160%;\\n  text-align: left;\\n  color: \",\" ;\\n\"])),function(props){return props.inStock?\"#1D1F22\":\"#8D8F9A\";});var ProductCard=/*#__PURE__*/function(_PureComponent){_inherits(ProductCard,_PureComponent);var _super=_createSuper(ProductCard);function ProductCard(props){var _this;_classCallCheck(this,ProductCard);_this=_super.call(this,props);_this.state={product:_this.props.product,inStock:_this.props.product.inStock,currency:_this.props.currency,amount:null};_this.getPrice=_this.getPrice.bind(_assertThisInitialized(_this));_this.addToCart=_this.addToCart.bind(_assertThisInitialized(_this));return _this;}_createClass(ProductCard,[{key:\"getPrice\",value:function getPrice(){var _this2=this;this.state.product.prices.map(function(item){if(item.currency.symbol===_this2.state.currency){return _this2.setState({amount:item.amount});}else{return null;}});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(props,state){if(this.state.currency!==this.props.currency){this.setState({currency:this.props.currency});this.getPrice();}}},{key:\"addToCart\",value:function addToCart(product){var price=this.state.amount;var selectedAttributes=[];var attributeNames=product.attributes.map(function(obj){return obj.name;});for(var i=0;i<attributeNames.length;i++){selectedAttributes.push([attributeNames[i],0]);}var duplicatesTemp=0;if(this.props.cartProducts.length!==0){for(var _i=0;_i<this.props.cartProducts.length;_i++){if(product.id===this.props.cartProducts[_i].id&&JSON.stringify(this.props.cartProducts[_i].selectedAttributes)===JSON.stringify(selectedAttributes)){duplicatesTemp=1;this.props.dispatch(changeProductQuantity(_i));break;}}}if(duplicatesTemp===0){this.props.dispatch(addProductToCart(_objectSpread(_objectSpread({},product),{},{selectedAttributes:selectedAttributes,productQuantity:1,price:price})));}}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,product=_this$state.product,inStock=_this$state.inStock,amount=_this$state.amount;this.getPrice();return/*#__PURE__*/_jsxs(ProductCardStyle,{children:[/*#__PURE__*/_jsx(ImageContainer,{children:/*#__PURE__*/_jsx(Image,{inStock:inStock,src:product.gallery[0],alt:\" product\"})}),!inStock&&/*#__PURE__*/_jsx(Text,{children:\"OUT OF STOCK\"}),/*#__PURE__*/_jsxs(Title,{inStock:inStock,children:[product.brand,\" \",product.name]}),/*#__PURE__*/_jsxs(Price,{inStock:inStock,children:[this.props.currency,\" \",amount]}),/*#__PURE__*/_jsx(Link,{style:{position:\"absolute\",inset:0},to:\"\".concat(product.id)}),/*#__PURE__*/_jsxs(Button,{inStock:inStock,onClick:function onClick(){return _this3.addToCart(product);},children:[\" \",/*#__PURE__*/_jsx(\"img\",{src:icon,alt:\"icon\",onClick:function onClick(){return null;}})]})]},product.id);}}]);return ProductCard;}(PureComponent);function mapStateToProps(state){return{currency:state.currency.currency,cartProducts:state.cart.products};};export default connect(mapStateToProps)(ProductCard);","map":{"version":3,"names":["PureComponent","styled","icon","Link","connect","addProductToCart","changeProductQuantity","ProductCardStyle","div","Text","p","Button","button","props","inStock","ImageContainer","Image","img","Title","Price","ProductCard","state","product","currency","amount","getPrice","bind","addToCart","prices","map","item","symbol","setState","price","selectedAttributes","attributeNames","attributes","obj","name","i","length","push","duplicatesTemp","cartProducts","id","JSON","stringify","dispatch","productQuantity","gallery","brand","position","inset","mapStateToProps","cart","products"],"sources":["H:/Svetik/qa-testing/online-store-with-endpoint/online-store/src/components/productCard/ProductCard.js"],"sourcesContent":["import { PureComponent} from \"react\";\r\nimport styled from \"styled-components\";\r\nimport icon from \"./button-icon-empty-cart.png\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from 'react-redux';\r\nimport { addProductToCart, changeProductQuantity } from \"../../store/cart\";\r\n\r\nconst ProductCardStyle = styled.div`\r\n  flex: 1;\r\n  order: 0;\r\n  flex-grow: 0;\r\n  background: #FFFFFF;\r\n  padding: 16px;\r\n  width: 386px;\r\n  position: relative;\r\n  &:hover {\r\n  box-shadow: 0px 4px 35px rgba(168, 172, 176, 0.19);\r\n  }\r\n`;\r\nconst Text = styled.p`\r\n  position: absolute;\r\n  left: 25.42%;\r\n  right: 25.71%;\r\n  top: 150px;\r\n  display: block;\r\n  font-weight: 400;\r\n  font-size: 24px;\r\n  line-height: 160%;\r\n  color: #8D8F9A;\r\n`;\r\nconst Button = styled.button`\r\n  display:  none;\r\n  background: #5ECE7B;\r\n  width: 52px;\r\n  height: 52px;\r\n  border: none;\r\n  border-radius: 50%;\r\n  justify-content: center;\r\n  ${props => props.inStock ? ` opacity: 1 `: `display: none !important; opacity: 0` } ;\r\n\r\n${ProductCardStyle}:hover & {\r\n  display: block;\r\n  position: absolute;\r\n  top: 320px;\r\n  left: 300px;\r\n  cursor: pointer;  \r\n}\r\n`;\r\nconst ImageContainer = styled.div`\r\n  width: 354px;\r\n  height: 330px;\r\n\r\n`;\r\nconst Image = styled.img`\r\n  max-height: 100%;\r\n  width: auto;\r\n  position: relative;\r\n  ${props => props.inStock ? `opacity: 1` : `opacity: 0.5`}\r\n`;\r\n\r\nconst Title = styled.p`\r\n  font-weight: 300;\r\n  font-size: 18px;\r\n  line-height: 160%;\r\n  text-align: left;\r\n  color: ${props => props.inStock? `#1D1F22` : `#8D8F9A` } ;\r\n  margin: 24px 0 0 0;\r\n`;\r\nconst Price = styled.p`\r\n  margin: 0;\r\n  font-weight: 500;\r\n  font-size: 18px;\r\n  line-height: 160%;\r\n  text-align: left;\r\n  color: ${props => props.inStock? `#1D1F22` : `#8D8F9A` } ;\r\n`;\r\nclass ProductCard extends PureComponent{\r\nconstructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            product: this.props.product,\r\n            inStock: this.props.product.inStock,\r\n            currency: this.props.currency,\r\n            amount: null,\r\n      };\r\n  this.getPrice = this.getPrice.bind(this);\r\n  this.addToCart = this.addToCart.bind(this);\r\n    }\r\n    getPrice() {\r\n        this.state.product.prices.map((item) => {\r\n            if (item.currency.symbol === this.state.currency) {\r\n                return this.setState({ amount: item.amount });\r\n            } else { return null; }\r\n        })\r\n    }\r\n    \r\n    componentDidUpdate(props, state) {\r\n     if (this.state.currency !== this.props.currency) {\r\n       this.setState({ currency: this.props.currency });\r\n       this.getPrice();\r\n    }\r\n  }\r\n  addToCart(product) {\r\n    let price = this.state.amount;\r\n    const selectedAttributes = [];\r\n    const attributeNames = product.attributes.map((obj) => { return obj.name });\r\n    for (let i = 0; i < attributeNames.length; i++){\r\n      selectedAttributes.push([attributeNames[i], 0]);\r\n    }\r\n    let duplicatesTemp = 0;\r\n        if (this.props.cartProducts.length !== 0) {\r\n            for (let i = 0; i < this.props.cartProducts.length; i++){\r\n                if (product.id === this.props.cartProducts[i].id && JSON.stringify(this.props.cartProducts[i].selectedAttributes) === JSON.stringify(selectedAttributes)) {\r\n                    duplicatesTemp = 1;\r\n                    this.props.dispatch(changeProductQuantity(i));\r\n                break;\r\n            }}        \r\n    }\r\n    if (duplicatesTemp === 0)\r\n    {this.props.dispatch(addProductToCart({ ...product, selectedAttributes , productQuantity:1, price }));}\r\n    }\r\n    render() {\r\n        const { product, inStock,amount } = this.state;\r\n        this.getPrice();\r\n        return (\r\n            <ProductCardStyle key={product.id} >\r\n                <ImageContainer><Image inStock={inStock} src={product.gallery[0]} alt=\" product\" /></ImageContainer>\r\n                {!inStock && <Text >OUT OF STOCK</Text>}\r\n                <Title inStock={inStock}>{product.brand} {product.name}</Title>\r\n                <Price inStock={inStock}>{this.props.currency} {amount}</Price>\r\n                <Link\r\n                style={{ position: \"absolute\", inset: 0 }}\r\n                    to={`${product.id}`} ></Link>\r\n                <Button inStock={inStock} onClick={()=> this.addToCart(product) }> <img src={icon} alt=\"icon\" onClick={()=> null} /></Button>\r\n            </ProductCardStyle>\r\n        )\r\n    }\r\n  \r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    currency: state.currency.currency,\r\n    cartProducts: state.cart.products,\r\n  }\r\n};\r\nexport default connect(mapStateToProps)(ProductCard);"],"mappings":"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"},"metadata":{},"sourceType":"module"}