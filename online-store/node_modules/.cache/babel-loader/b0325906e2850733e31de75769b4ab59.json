{"ast":null,"code":"import _defineProperty from\"H:/Svetik/qa-testing/online-store-with-endpoint/online-store/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"H:/Svetik/qa-testing/online-store-with-endpoint/online-store/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"H:/Svetik/qa-testing/online-store-with-endpoint/online-store/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import{ApolloClient,InMemoryCache}from'@apollo/client';import{GET_CURRENCY}from\"../components/graphql/getCurrency\";export var fetchCurrency=createAsyncThunk(\"currency/fetchCurrency\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_,_ref){var rejectWithValue,client,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:rejectWithValue=_ref.rejectWithValue;_context.prev=1;client=new ApolloClient({uri:'http://localhost:4000/',cache:new InMemoryCache()});_context.next=5;return client.query({query:GET_CURRENCY}).then(function(result){return result.data.currencies;}).catch(function(error){throw new Error(\"Something went wrong...\");});case 5:response=_context.sent;console.log(response);return _context.abrupt(\"return\",response);case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);return _context.abrupt(\"return\",rejectWithValue(_context.t0.message));case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}());export var currencySlice=createSlice({name:\"currency\",initialState:{currencies:[],currency:\"$\",activeItem:0,currencyOpen:false,status:null,error:null},reducers:{updateCurrency:function updateCurrency(state,action){state.currency=action.payload.currency;state.activeItem=action.payload.activeItem;state.currencyOpen=action.payload.currencyOpen;},showCurrencyList:function showCurrencyList(state,action){state.currencyOpen=action.payload;}},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,fetchCurrency.pending,function(state){state.status=\"loading\";state.error=null;}),_defineProperty(_extraReducers,fetchCurrency.fulfilled,function(state,action){state.status=\"resolved\";state.currencies=action.payload;}),_defineProperty(_extraReducers,fetchCurrency.rejected,function(state,action){state.status=\"rejected\";state.error=action.payload;}),_extraReducers)});var _currencySlice$action=currencySlice.actions,updateCurrency=_currencySlice$action.updateCurrency,showCurrencyList=_currencySlice$action.showCurrencyList;export{updateCurrency,showCurrencyList};export default currencySlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","ApolloClient","InMemoryCache","GET_CURRENCY","fetchCurrency","_","rejectWithValue","client","uri","cache","query","then","result","data","currencies","catch","error","Error","response","console","log","message","currencySlice","name","initialState","currency","activeItem","currencyOpen","status","reducers","updateCurrency","state","action","payload","showCurrencyList","extraReducers","pending","fulfilled","rejected","actions","reducer"],"sources":["H:/Svetik/qa-testing/online-store-with-endpoint/online-store/src/store/currency.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport { ApolloClient, InMemoryCache } from '@apollo/client';\r\nimport { GET_CURRENCY } from \"../components/graphql/getCurrency\";\r\n\r\nexport const fetchCurrency = createAsyncThunk(\r\n    \"currency/fetchCurrency\",\r\n    async function (_, { rejectWithValue }) {\r\n        try {\r\n            const client = new ApolloClient({ uri: 'http://localhost:4000/', cache: new InMemoryCache(), });\r\n            const response = await client.query({ query: GET_CURRENCY }).then((result) => {\r\n                return result.data.currencies;\r\n            }).catch((error) => { throw new Error(\"Something went wrong...\"); });\r\n            console.log(response);\r\n            return response;\r\n        } catch (error) { return rejectWithValue(error.message); }\r\n    }\r\n);\r\n\r\n\r\nexport const currencySlice = createSlice({\r\n    name: \"currency\",\r\n    initialState: {\r\n        currencies: [],\r\n        currency: \"$\",\r\n        activeItem: 0,\r\n        currencyOpen: false,\r\n        status: null,\r\n        error: null,\r\n    },\r\n    reducers: {\r\n        updateCurrency: (state, action) => {\r\n            state.currency = action.payload.currency; \r\n            state.activeItem = action.payload.activeItem;\r\n            state.currencyOpen = action.payload.currencyOpen;\r\n        },\r\n        showCurrencyList: (state, action) => {\r\n            state.currencyOpen = action.payload;\r\n        }\r\n    },\r\n    extraReducers: {\r\n        [fetchCurrency.pending]: (state) => { \r\n            state.status = \"loading\";\r\n            state.error = null;\r\n        },\r\n        [fetchCurrency.fulfilled]: (state, action) => { \r\n            state.status = \"resolved\";\r\n            state.currencies = action.payload;\r\n        },\r\n        [fetchCurrency.rejected]: (state, action) => {\r\n            state.status = \"rejected\";\r\n            state.error = action.payload;\r\n        },\r\n    }\r\n});\r\n\r\nexport const { updateCurrency,showCurrencyList } = currencySlice.actions;\r\n\r\nexport default currencySlice.reducer;"],"mappings":"2dAAA,OAASA,WAAT,CAAsBC,gBAAtB,KAA8C,kBAA9C,CACA,OAASC,YAAT,CAAuBC,aAAvB,KAA4C,gBAA5C,CACA,OAASC,YAAT,KAA6B,mCAA7B,CAEA,MAAO,IAAMC,cAAa,CAAGJ,gBAAgB,CACzC,wBADyC,6FAEzC,iBAAgBK,CAAhB,6JAAqBC,eAArB,MAAqBA,eAArB,iBAEcC,MAFd,CAEuB,GAAIN,aAAJ,CAAiB,CAAEO,GAAG,CAAE,wBAAP,CAAiCC,KAAK,CAAE,GAAIP,cAAJ,EAAxC,CAAjB,CAFvB,uBAG+BK,OAAM,CAACG,KAAP,CAAa,CAAEA,KAAK,CAAEP,YAAT,CAAb,EAAsCQ,IAAtC,CAA2C,SAACC,MAAD,CAAY,CAC1E,MAAOA,OAAM,CAACC,IAAP,CAAYC,UAAnB,CACH,CAFsB,EAEpBC,KAFoB,CAEd,SAACC,KAAD,CAAW,CAAE,KAAM,IAAIC,MAAJ,CAAU,yBAAV,CAAN,CAA6C,CAF5C,CAH/B,QAGcC,QAHd,eAMQC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EANR,gCAOeA,QAPf,4FAQ6BZ,eAAe,CAAC,YAAMe,OAAP,CAR5C,uEAFyC,oEAAtC,CAeP,MAAO,IAAMC,cAAa,CAAGvB,WAAW,CAAC,CACrCwB,IAAI,CAAE,UAD+B,CAErCC,YAAY,CAAE,CACVV,UAAU,CAAE,EADF,CAEVW,QAAQ,CAAE,GAFA,CAGVC,UAAU,CAAE,CAHF,CAIVC,YAAY,CAAE,KAJJ,CAKVC,MAAM,CAAE,IALE,CAMVZ,KAAK,CAAE,IANG,CAFuB,CAUrCa,QAAQ,CAAE,CACNC,cAAc,CAAE,wBAACC,KAAD,CAAQC,MAAR,CAAmB,CAC/BD,KAAK,CAACN,QAAN,CAAiBO,MAAM,CAACC,OAAP,CAAeR,QAAhC,CACAM,KAAK,CAACL,UAAN,CAAmBM,MAAM,CAACC,OAAP,CAAeP,UAAlC,CACAK,KAAK,CAACJ,YAAN,CAAqBK,MAAM,CAACC,OAAP,CAAeN,YAApC,CACH,CALK,CAMNO,gBAAgB,CAAE,0BAACH,KAAD,CAAQC,MAAR,CAAmB,CACjCD,KAAK,CAACJ,YAAN,CAAqBK,MAAM,CAACC,OAA5B,CACH,CARK,CAV2B,CAoBrCE,aAAa,mDACR/B,aAAa,CAACgC,OADN,CACgB,SAACL,KAAD,CAAW,CAChCA,KAAK,CAACH,MAAN,CAAe,SAAf,CACAG,KAAK,CAACf,KAAN,CAAc,IAAd,CACH,CAJQ,iCAKRZ,aAAa,CAACiC,SALN,CAKkB,SAACN,KAAD,CAAQC,MAAR,CAAmB,CAC1CD,KAAK,CAACH,MAAN,CAAe,UAAf,CACAG,KAAK,CAACjB,UAAN,CAAmBkB,MAAM,CAACC,OAA1B,CACH,CARQ,iCASR7B,aAAa,CAACkC,QATN,CASiB,SAACP,KAAD,CAAQC,MAAR,CAAmB,CACzCD,KAAK,CAACH,MAAN,CAAe,UAAf,CACAG,KAAK,CAACf,KAAN,CAAcgB,MAAM,CAACC,OAArB,CACH,CAZQ,iBApBwB,CAAD,CAAjC,CAoCA,0BAA4CX,aAAa,CAACiB,OAA1D,CAAQT,cAAR,uBAAQA,cAAR,CAAuBI,gBAAvB,uBAAuBA,gBAAvB,C,wCAEP,cAAeZ,cAAa,CAACkB,OAA7B"},"metadata":{},"sourceType":"module"}